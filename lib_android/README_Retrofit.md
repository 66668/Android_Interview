# retrofit 总结

## 库用途
Retrofit是一个 RESTful 的 HTTP 网络请求框架的封装。Retrofit 2.0 开始内置 OkHttp，前者专注于接 口的封装，后者专注于网络请求的高效。

## 库优点：
1. 功能强大:
支持同步、异步 

支持多种数据的解析 & 序列化格式 

支持RxJava

2. 简洁易用: 

通过注解配置网络请求参数

采用大量设计模式简化使用 

3. 可扩展性好:

功能模块高度封装 

解耦彻底，如自定义Converters

## 缺点：

扩展性差，高度封装所带来的必然后果，如果服务器不能给出统一的API形式，会很难处 理。

##这个库都有哪些用法?对应什么样的使用场景? 

任何网络场景都应该优先选择，特别是后台API遵循Restful API设计风格 & 项目中使用到RxJava。


## 核心实现原理是什么? 如果让你实现这个库的某些核心功能，你会考虑怎么去实现?

Retrofit主要是在create方法中采用动态代理模式(通过访问代理对象的方式来间接访问目标对象)实 现接口方法，这个过程构建了一个ServiceMethod对象，根据方法注解获取请求方式，参数类型和参数 注解拼接请求的链接，当一切都准备好之后会把数据添加到Retrofit的RequestBuilder中。然后当我们 主动发起网络请求的时候会调用okhttp发起网络请求，okhttp的配置包括请求方式，URL等在Retrofit 的RequestBuilder的build()方法中实现，并发起真正的网络请求。

## 学到什么有价值的或者说可借鉴的设计思想?

1. 创建Retrofit实例: 

使用**建造者模式**通过内部Builder类建立了一个Retroift实例。

网络请求工厂使用了**工厂方法模式**。
 
2. 创建网络请求接口的实例:
首先，使用**外观模式**统一调用创建网络请求接口实例和网络请求参数配置的方法。 

然后，使用**动态代理**动态地去创建网络请求接口实例。

接着，使用了**建造者模式 和 单例模式**创建了serviceMethod对象。 

再者，使用了**策略模式**对serviceMethod对象进行网络请求参数配置，即通过解析网络请求接口方法的参数、返回值和注解类型，从Retrofit对象中获取对应的网络的url地址、网络请求执行器、网 络请求适配器和数据转换器。 

最后，使用了**装饰者模式**ExecuteCallBack为serviceMethod对象加入线程切换的操作，便于接受 数据后通过Handler从子线程切换到主线程从而对返回数据结果进行处理。

3. 发送网络请求: 

在异步请求时，通过静态delegate代理对网络请求接口的方法中的每个参数使用对应的ParameterHanlder进行解析。 

4. 解析数据

5. 切换线程: 使用了**适配器模式**通过检测不同的Platform使用不同的回调执行器，然后使用回调执行器切换线程，这里同样是使用了**装饰模式**。 

6. 处理结果
