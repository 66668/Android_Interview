# https 总结（加密算法）（和http的区别）

## 面试点：


## 对称加密

这种加密方式比较简单，就是双方都持有密匙。S和C都持有密匙， S通过密匙加密明文传递给C，C获取加密后的信息，用密匙解密信息。

流行的对称加密算法有：DES、3DES、TDEA、Blowfish、RC5和IDEA

缺点：

1， 密匙的传递是个问题，容易被截取，密匙一旦被截取后， 就能轻易破解信息

2，密钥管理的复杂度问题。由于对称加密的密钥是一对一的使用方式，若一方要跟n方通信，则需要维护n对密钥。

好处：加密速度快

## 非对称加密

非对称加密中，S和C端都有自己的公钥和私钥。公钥是公开的，私钥是私有的，私钥需要保密的。 这套公钥和私钥的有个两种加密解密流程：
用公钥加密的信息，用私钥才能解密。因为私钥是私有的， 这种流程用于信息的加密解密（https）；用私钥加密信息，用公钥来解密。因为公钥是共有的，这种流程用于认证。
加密算法有:RSA、Elgamal、Rabin、D-H、ECC（椭圆曲线加密算法）等

在https中信息传递的密匙的传递是采用非对称加密传递的.

C端需要把信息传递给S端, 需要分几步.

(1)C端请求S端，S端把自己的公钥传递给C端。

(2)C用S的公钥把信息加密后传递给S. S用自己的私钥解密获取信息。

优点：

1，不存在密钥分发的问题，解码方可以自己生成密钥对，一个做私钥存起来，另外一个作为公钥进行发布。

2，解决了密钥管理的复杂度问题，多个加密方都可以使用一个已知的公钥进行加密，但只有拥有私钥的一方才能解密。

缺点：加解密的速度没有对称加密快。

综上，分析了对称加密和非对称加密各自的优缺点后，有没有一种办法是可以利用两者的优点但避开对应的缺点呢？答应是有的，实际上用得最多的是混合加密系统，
比如在两个节点间通过便捷的公开密码加密技术建立起安全通信，然后再用安全的通信产生并发送临时的随机对称密钥，通过更快的对称加密技术对剩余的数据进行加密。

### 既然对称加密和非对称加密都需要保密好自己的私钥， 那有什么区别呢？

对称加密中，私钥不仅需要自己知道也需要解密方知道。 这样私钥就有一个传递的流程， 这个流程就会有很大风险。 而非对称加密只需要自己保密好自己的私钥就好了。 
公钥大家都知道，不需要保密，就少了一个私钥传递的过程。 少了很大的风险。

## HTTPS通信过程

### HTTPS加密方式
HTTPS为了兼顾安全与效率，同时使用了对称加密和非对称加密。
数据是被对称加密传输的，对称加密过程需要客户端的一个密钥，为了确保能把该密钥安全传输到服务器端;
采用非对称加密对该密钥进行加密传输，总的来说，对数据进行对称加密，对称加密所要使用的密钥通过非对称加密传输。

### HTTPS通信流程
一个HTTPS请求实际上包含了两次HTTP传输，可以细分为8步。
第一次HTTP请求:

1. 客户端向服务器发起HTTPS请求，连接到服务器的443端口。
2. 服务器端有一个密钥对，即公钥和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人。
3. 服务器将自己的公钥发送给客户端。
4. 客户端收到服务器端的公钥之后，会对公钥进行检查，验证其合法性，如果公钥合格，那么客户端会生成一个随机值，
这个随机值就是用于进行对称加密的密钥，我们将该密钥称之为client key，即客户端密钥，这样在概念上和服务器端的密钥容易进行区分。
然后用服务器的公钥对客户端密钥进行非对称加密，这样客户端密钥就变成密文了，至此，HTTPS中的第一次HTTP请求结束。

第二次HTTP请求:

1. 客户端会发起HTTPS中的第二个HTTP请求，将加密之后的客户端密钥发送给服务器。
2. 服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文。
然后服务器将加密后的密文发送给客户端。
3. 客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。这样HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。

## HTTPS和HTTP的区别
超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息。HTTP协议以明文方式发送内容，不提供任何方式的数据加密，
如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此HTTP协议不适合传输一些敏感信息，比如信用卡号、密码等。
为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS。为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，
SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。

HTTPS和HTTP的区别主要为以下四点：

1. https协议需要到ca申请证书，一般免费证书很少，需要交费。
2. http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。
3. http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
4. http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。

## 数字证书
### 为什么需要数字证书

在https中需要证书，证书的作用是为了防止"中间人攻击"的。 如果有个中间人M拦截客户端请求,然后M向客户端提供自己的公钥，M再向服务端请求公钥,作为"中介者" 
这样客户端和服务端都不知道,信息已经被拦截获取了。这时候就需要证明服务端的公钥是正确的.
怎么证明呢?
就需要权威第三方机构来公正了.这个第三方机构就是CA. 也就是说CA是专门对公钥进行认证，进行担保的，也就是专门给公钥做担保的担保公司。 全球知名的CA也就100多个，
这些CA都是全球都认可的，比如VeriSign、GlobalSign等，国内知名的CA有WoSign。

### 数字证书怎么起作用

不论什么平台，设备的操作系统中都会内置100多个全球公认的CA，说具体点就是设备中存储了这些知名CA的公钥。当客户端接收到服务器的数字证书的时候，会进行如下验证：

1. 首先客户端会用设备中内置的CA的公钥尝试解密数字证书，如果所有内置的CA的公钥都无法解密该数字证书，说明该数字证书不是由一个全球知名的CA签发的，这样客户端就无法信任该服务器的数字证书。
2. 如果有一个CA的公钥能够成功解密该数字证书，说明该数字证书就是由该CA的私钥签发的，因为被私钥加密的密文只能被与其成对的公钥解密。
3. 除此之外，还需要检查客户端当前访问的服务器的域名是与数字证书中提供的“颁发给”这一项吻合，还要检查数字证书是否过期等。

### 证书链

一般CA不会直接去使用自己的私钥去签名某网站的证书, 一般CA会签发一个子证书, 然后用这子证书去签网站的证书. 有可能有多个子证书. 如果父证书是可以被信任的,
那么这个子证书就是可以被信任的.
